<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
	<title>Perfil</title>
	<link rel="stylesheet" th:href="@{/css/perfilUsuario.css}" href="css/perfilUsuario.css" type="text/css" />
</head>

<body>
	<th:block th:replace="fragments/head :: header" />
	<nav th:replace="fragments/nav.html :: nav">
		Nav goes here
	</nav>

	<div class="container">
		<div class="main">

			<p class="titulo">InformaciÃ³n del usuario <span th:text="${user.username}">Pepe</span></p>

			<div th:if="(${session.u.id} eq ${user.id}) or ${session.u.hasRole('ADMIN')}">
				<img th:src="@{/user/{id}/photo(id=${user.id})}" width="60px" height="60px">
				<p><span class="titulo2">Nombre de usuario:</span><span th:text="${user.firstName}">x</span></p>
				<p><span class="titulo2">Primer apellido:</span><span th:text="${user.lastName1}">x</span></p>
				<p><span class="titulo2">Segundo apellido:</span><span th:text="${user.lastName2}">x</span></p>
				<p><span class="titulo2">Edad:</span><span th:text="${user.age}">x</span></p>
				<p><span class="titulo2">TelÃ©fono:</span><span th:text="${user.tlf}">x</span></p>
				<p><span class="titulo2">DirecciÃ³n:</span><span th:text="${user.address}">x</span></p>
				<p><span class="titulo2">Ciudad:</span><span th:text="${user.city}">x</span></p>
				<p><span class="titulo2">Provincia:</span><span th:text="${user.province}">x</span></p>
				<p><span class="titulo2">CÃ³digo Postal:</span><span th:text="${user.postalCode}">x</span></p>

				<a th:href="@{/user/{id}/editar(id=${session.u.id})}">Editar Perfil</a>
				<a th:href="@{/user/{id}/eliminar(id=${session.u.id})}">Eliminar cuenta</a>

				<h2>Negocios</h2>
				<div th:each="n: ${negocios}">
					<p>
						<a th:href="@{/negocio/{id}(id=${n.id})}" th:text="${n.id}">123</a>
						<span th:text="${n}">texto del negocio</span>
						<form method="post" th:action="@{/negocio/{id}/eliminar(id=${n.id})}">
							<button th:text="Eliminar" type="submit">ðŸ—‘</button>
						</form>
					</p>
				</div>

				<h2>Reservas</h2>
				<div th:each="r: ${reservas}">
					<p th:if="${r.estado.name() == 'SOLICITADA'}">
						<span th:text="${r.id}">123</span>
						<span th:text="${r}">Texto de la reserva</span>
						<div th:if="${r.estado.name() == 'SOLICITADA'}">
							<form method="post" th:action="@{/reserva/{id}/cancelar(id=${r.id})}">
								<button th:text="Cancelar" type="submit">ðŸ—‘</button>
							</form>
							 
						</div>
					</p>
				</div>

				<a th:href="@{/negocio/}">Crea tu negocio</a>

			</div>
		</div>
	</div>
	<th:block th:replace="fragments/footer.html" />
</body>

</html>